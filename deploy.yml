trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

variables:
  azureSubscription: '0ef4eff1-f9d2-412e-8788-9d731f428cfb'
  functionAppName: 'DevOpsauth32'
  resourceGroupName: 'DevOpsauth32_group'
  packagePath: '$(System.DefaultWorkingDirectory)/src'

steps:
- task: AzureFunctionApp@1
  inputs:
    azureSubscription: $(azureSubscription)
    appType: 'functionApp'
    appName: $(functionAppName)
    resourceGroupName: $(resourceGroupName)
    package: $(packagePath)
    enableManagedIdentity: true
    deploymentMethod: 'zipDeploy'
